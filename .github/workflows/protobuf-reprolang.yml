name: Generated code is up to date

on:
  pull_request:
    paths:
      - '.github/workflows/**'
      - 'docs/**'
      - 'bindings/**'
      - 'scip.proto'
      - 'buf**'
      - '.tool-versions'
      - 'dev/proto-generate.sh'
      - 'dev/proto-generate-in-docker.sh'
      - 'Dockerfile.bindings'
      - 'cmd/scip/tests/reprolang/**'

jobs:
  gen-up-to-date:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: ./dev/generate-all-in-docker.sh
      - run: git diff --exit-code
